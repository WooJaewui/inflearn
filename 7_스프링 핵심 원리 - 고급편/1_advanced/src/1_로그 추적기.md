
# 로그 분석기

-----------------------------------------------------------------------------------------------------------------------------------------------

> ## 요구사항 분석

### 로그 분석기 요구사항
- 모든 public 메서드의 호출과 응답 정보를 로그로 출력
- 어플리케이션의 흐름을 ㅂ녑경하면 안됨
- 메서드 호출에 걸린 시간
- 정상 흐름과 예외 흐름 구분
- 메서드 호출의 깊이표현
- HTTP 요청을 구분
  - HTTP 요청 단위로 특정 ID를 남겨서 어떤 HTTP 요청에서 시작된 것인지 명확하게 구분이 가능해야 함
  - 트랜잭션 ID(DB 트랜잭션 X), 여기서는 하나의 HTTP 요청이 시작해서 끝날 때까지를 하나의 트랜잭션이라 함

-----------------------------------------------------------------------------------------------------------------------------------------------

> ## 프로토타입 개발

### 개요
- 요구사항에 맞추어 어플리케이션에 효과적으로 로그를 남기기 위한 로그 추적기를 개발해보자


### 주의
- 지금까지 만든 로그 추적기가 어떻게 동작하는지 확실히 이해해야 다음 과정이 이해가 된다

-----------------------------------------------------------------------------------------------------------------------------------------------

> ## 적용

### 정리
- 로그를 하나하나 남기는 것보다는 편하게 여러가지 로그를 남길 수 있었다
- 하지만 로그를 남기기 위한 코드가 생각보다 너무 복잡하다 (기능 완성 후 리팩터링에 대해 생각하자)

-----------------------------------------------------------------------------------------------------------------------------------------------

> ## 정리

### 남은 문제
- HTTP 요청을 구분하고 표현하기 위해 TraceId 동기화가 필요하다
- TraceId의 동기화를 위해서 관련 메서드의 모든 파라미터를 수정해야 한다
  - 만약 인터페이스가 있다면 인터페이스까지 모두 고쳐야 하는 상황이다
- 로그를 처음 시작할 때는 begin(), 처음이 아닐 때는 beginSync()를 호출


### 정리
- 결과적으로 다른 방법이 필요하다

















