
# Redis 특수 명령어

------------------------------------------------------------------------------------------------------------------------

> ## 데이터 만료 Expiration

### 데이터 만료
- 데이터를 특정시간 이후에 만료 시키는 기능
  - TTL (Time To Live) : 데이터가 유효한 시간 (초 단위)
- 데이터 조회 요청시에 만료된 데이터는 조회되지 않음
- 데이터가 만료되자마자 삭제하지 않고, 만료로 표시했다가 백그라운드에서 주기적으로 삭제


### 명령어
    // 만료시간 10초로 설정
    EXPIRE greeting 10

    // 만료시간 확인
    TTL greeting

    // 데이터를 저장하면서 만료 시간 설정
    SETEX greeting 10 hello

------------------------------------------------------------------------------------------------------------------------

> ## SET NX/XX

### NX
- 해당 key가 존재하지 않는 경우에만 SET
- SET이 동작하지 않은 경우 nil 응답


### XX
- 해당 key가 이미 존재하는 경우에만 SET
- SET이 동작하지 않은 경우 nil 응답


### 명령어
    SET greeting hello nx
    set greeting hello xx

------------------------------------------------------------------------------------------------------------------------

> ## Pub/Sub

### Pub/Sub
- Publisher와 Subscriber가 서로 알지 못해도 통신이 가능하도록 decoupling 된 패턴
- Publisher는 Subscriber에게 직접 메시지를 보내지 않고, Channel에 Publish Subscriber는 관심이 있는 Channel을 필요에 따라 Subscribe하며 메시지 수신


### 명령어
    // 구독
    SUBSCRIBE ch:order ch:paymenr

    // 발행
    PUBLISH ch:order new-order
    PUBLISH ch:payment new-payment

------------------------------------------------------------------------------------------------------------------------

> ## Pipeline

### pipelining
- 다수의 commands를 한 번에 요청하여 네트워크 성능을 향상 시키는 기술
- Roun-Trip Times 최소화
- 대부분의 클라이언트 라이브러리에서 지원
- Round-Trip Times
  - Request / Response 모델에서 발생하는 네트워크 지연 시간을 줄일 수 있음 

------------------------------------------------------------------------------------------------------------------------

> ## Transaction

### Transaction
- 다수의 명령을 하나의 트랜잭션으로 처리 -> 원자성(Atomicity) 보장
- 중간에 에러가 발생하면 모든 작업 Rollback
- 하나의 트랜잭션이 처리되는 동안 다른 클라이언트의 요청이 중간에 끼어들 수 없음
- Atomicity
  - All or Nothing / 모든 작업이 적용되거나 하나도 적용되지 않거나


### Pipeline 비교
- Pipeline은 네트워크 퍼포먼스 향상을 위해 여러 개의 명령어를 한 번에 요청
- Transaction은 작업의 원자성을 보장하기 위해 다수의 명령을 하나처럼 처리하는 기술
- Pipeline과 Transaction을 동시에 사용 가능


### 명령어
    // 트랜잭션 시작
    MULTI
    
    // 롤백
    DISCARD

    // 커밋
    EXEC











