
# 데이터 타입 활용

------------------------------------------------------------------------------------------------------------------------

> ## String - One Time Password (임시 비밀번호)

### One-Time Password
- 인증을 위해 사용되는 임시 비밀번호 (6자리 랜덤 숫자)


### OTP 인증 방법
1. 사용자 인증 요청
2. 주민번호, 전화 번호 등을 key로 하고 6자리 난수를 생성하고 EXPIRE 설정 
3. 생성된 OTP를 사용자에게 전송
4. 메일 등을 통해 OTP 인증
5. Redis에 저장된 OTP와 사용자가 보낸 OTP 확인 후 일치하면 인증 성공

------------------------------------------------------------------------------------------------------------------------

> ## String - Distributed Lock (분산 락)

### Distributed Lock
- 분산 환경의 다수의 프로세스에서 동일한 자원에 접근할 때, 동시성 문제 해결


### 분산 락 사용
- 사용자 1
  - SET lock 1 NX
  - 요청 완료 후
  - DEL lock
- 사용자 2
  - SET lock 1 NX
  - 요청 완료 후
  - DEL lock

------------------------------------------------------------------------------------------------------------------------

> ## String - Fixed Window Rate Limiter (비율 계산기)

### Rate Limiter
- 시스템 안정성/보안을 위해 요청의 수를 제한하는 기술
- IP-Based, User-Based, Application-Based, etc


### Fixed-window Rate Limiting
- 고정된 시간 (1분) 안에 요청 수를 제한하는 방법


### 구현 방법
- 요청이 발생할 때마다 INCR key를 통해 +1씩 늘려나간다
- 요청 제한 값이 제한 횟수를 넘을 때 요청 제한한다

------------------------------------------------------------------------------------------------------------------------

> ## List - SNS Activity Feed (소셜 네트워크 활동 피드)

### Activity Feed
- 사용자 또는 시스템과 관련된 활동이나 업데이트를 시간순으로 정렬하여 보여주는 기능


### Fan-Out
- 단일 데이터를 한 소스에서 여러 목적지로 동시에 전달하는 메시징 패턴


### 구현 방법
    // feed 내용 추가
    LPUSH user:2:feed "users1 liked a post"
    LPUSH user:3:feed "users1 liked a post"
    ...

    // 2번이 feed 내용을 요청한 경우
    LRANGE user:2:feed 0 9
- feed 내용을 추가할 사람은 나를 구독한 사람, 서로 친구를 맺은 사람 등으로 기능을 구현할 수 있다

------------------------------------------------------------------------------------------------------------------------

> ## Set - Shopping Cart (장바구니)

### Shopping Cart
- 사용자가 구매를 원하는 상품을 임시로 모아두는 가상의 공간
- 수시로 변경이 발생할 수 있고, 실제 구매로 이어지지 않을 수도 있다


### 구현 방법
- 사용자가 상품을 추가 SADD cart item1
- 사용자가 장바구니를 조회 SMEMBERS cart

------------------------------------------------------------------------------------------------------------------------

> ## Hash - Login Session (로그인 세션)

### Login Session
- 사용자의 로그인 상태를 유지하기 위한 기술


### 동시 로그인 제한
- 로그인시 세션의 개수를 제한하여, 동시에 로그인 가능한 디바이스 개수 제한


### 구현 방법
1. 사용자가 log-in(username/password)
2. Redis에 세션 데이터 저장 HSET session_id id name grade premium
3. 사용자에게 저장한 session_id를 보냄
4. 사용자가 다른 요청을 수행하면서 session_id를 보냄
5. Redis에서 저장된 세션 데이터와 사용자가 보낸 session_id가 일치하는지 확인

------------------------------------------------------------------------------------------------------------------------

> ## Sorted Set - Sliding Window Rate Limiter (비율 계산기)

### Sliding Window Rate Limiter
- 시간에 따라 Window를 이동시켜 동적으로 요청 수를 조절하는 기술


### Fixed Window 차이
- Fixed Window는 window 시간마다 허용량이 초기화된다
- Sliding Window는 시간이 경과함에 따라 window가 같이 움직인다


### 구현 방법
1. 사용자 요청
2. ZREMRANGEBYSCORE 1.1.1.1 0 1693494070
3. ZCARD 1.1.1.1
4. 1분 이내에 요청 회수를 확인

------------------------------------------------------------------------------------------------------------------------

> ## Geospatial - Geofencing (반경 탐색)

### Geofencing
- 위치를 활용하여 지도 상의 가상의 경계 또는 지리적 영역을 정의하는 기술


### 구현 방법
- GEOADD gang-nam:burgers 127.025705 37.501272 five-guys 127.397347 37.394234 shake-shake ...
- GEORADIUS gang-nam:burgers 127.023723 37.4982374 0.5 km

------------------------------------------------------------------------------------------------------------------------

> ## Bitmap - User Online Status (온라인 상태 표시)

### Online Status
- 사용자의 현재 상태를 표시하는 기능
- 실시간성을 완벽히 보장하지는 않는다
- 수시로 변경되는 값이다


### 구현 방법
- 1분 마다 사용자의 요청을 확인해서 요청이 없는 경우 오프라인으로 간주
- SETBIT user:1:30 1
- GETBIT user:1:30 (1을 반환 - 온라인)
- GETBIT user:1:31 (0을 반환 - 오프라인)

------------------------------------------------------------------------------------------------------------------------

> ## HyperLogLog - Visitors Count (방문자 수 계산)

### Visitors Count Approximation
- 방문자 수(또는 특정 횟수)를 대략적으로 추정하는 경우
- 정확한 횟수를 셀 필요 없이 대략적인 어림치만 알고자 하는 경우

------------------------------------------------------------------------------------------------------------------------

> ## BloomFilter - Unique Events (중복 이벤트 제거)

### Unique Events
- 동일 요청이 중복으로 처리되지 않기 위해 빠르게 해당 item이 중복인지 확인하는 방법
























