
# Redis 사용시 주의사항

------------------------------------------------------------------------------------------------------------------------

> ## O(N) 명령어

### O(N) 명령어
- 대부분의 명령어는 O(1) 시간복잡도를 갖지만, 일부 명령어의 경우 O(N)
- 주의사항
  - Redis는 Single Thread 명령어로 순차적으로 수행하기 때문에, O(N) 명령어 수행시 전체적인 어플리케이션 성능 저하


### O(N) 명령어
- KEYS 
  - 지정된 패턴과 일치하는 모든 키 key 조회
  - Production 환경에서 절대 사용 금지 -> SCAN 명령어로 대체
- SMEMBERS
  - Set의 모든 member 반환 (N = Set Cardinality)
  - 하나의 Set에 만개 이상 넣지 말 것
- HGETALL
  - Hash의 모든 field 반환 (N = Size of Hash)
- SORT
  - List, Set, ZSet의 item 정렬하여 반환

------------------------------------------------------------------------------------------------------------------------

> ## Thundering Herd Problem

### Thundering Herd
- 병렬 요청이 공유 자원에 대해서 접근할 때, 급격한 과부하가 발생하는 문제


### 주의사항
- 동시에 대규모 요청이 발생했을 때 cache miss가 발생하면 Database에 과부하가 발생한다
- 접근이 몰릴 수 있는 데이터는 자주 최신화하여 cache miss가 발생하지 않도록 관리해야 한다

------------------------------------------------------------------------------------------------------------------------

> ## Stale Cache Invalidation

### Cache Invalidation
- 캐시의 유효성이 손실되었거나 변경되었을 때, 캐시를 변경하거나 삭제하는 기술


### 주의 사항
- Database 저장된 데이터와 Cache에 저장된 데이터가 일치하도록 만들어야 한다





















