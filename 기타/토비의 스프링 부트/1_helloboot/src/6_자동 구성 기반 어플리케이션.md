
# 자동 구성 기반 어플리케이션

---------------------------------------------------------------------------------------------------------------------------------

> ## 메타 어노테이션과 합성 어노테이션

### 메타어노테이션
- 어노테이션에 다른 어노테이션을 선언하는 것
- 기능을 확장하거나, 새로운 이름을 부여하여 개발자가 구분할 수 있도록 할 수 있다 (상속과 다르다)
- 예 : @Component를 선언한 @Controller, @Service


### 합성 어노테이션 (composed annotation)
- 하나 이상의 메타 어노테이션을 사용하는 어노테이션
- 반복적으로 여러 어노테이션이 붙는 경우 하나의 어노테이션으로 정리해서 사용할 수 있다

---------------------------------------------------------------------------------------------------------------------------------

> ## 합성 어노테이션의 적용

### ElementType.TYPE
- 어노테이션을 클래스, 인터페이스, 이넘에 적용할 수 있다


### @Configuration
- Component 메타 어노테이션

---------------------------------------------------------------------------------------------------------------------------------

> ## 빈 오브젝트와 역할과 구분

### 어플리케이션 빈
- 개발자가 어떤 빈을 사용하겠다라고 구성정보를 제공한 빈
- DataSource, JpaEntityManagerFactory, JdbcTransactionManager


### 컨테이너 인프라스트럭처 빈
- 스프링 컨테이너 자신, 스프링이 기능을 확장하면서 추가해온 빈
- 개발자가 구성정보를 제공하지 않아도 자동으로 등록된 빈
- ApplicationContext/BeanFactory, Environment 


### 어플리케이션 빈 종류
- 어플리케이션 로직 빈
  - 개발자가 직접 만들어서 등록하는 빈
  - 사용자 구성정보 - ComponentScan
- 어플리케이션 인프라스트럭처 빈
  - 개발자가 직접 만들기 보다는 만들어진 것을 빈으로 등록
  - 자동 구성정보 - AutoConfiguration
  - DataSource, TomcatServletWebServerFactory, JpaEntityManagerFactory

---------------------------------------------------------------------------------------------------------------------------------

> ## 동적인 자동 구성 정보 등록

### ImportSelector 인터페이스
- 이 인터페이스의 구현체를 통해 Configuration 클래스들을 동적으로 가져올 수 있다

---------------------------------------------------------------------------------------------------------------------------------

> ## 자동 구성 정보 파일 분리

### ImportCandidates
    META-INF/spring/full-qualified-annotation-name.imports (Config 파일을 읽어오는 파일 경로)
- Config 파일을 auto-configurations 할 수 있도록 도와주는 클래스
- 위 파일 경로에 .imports 파일을 생성하고 Config 파일 경로를 작성하면 된다

---------------------------------------------------------------------------------------------------------------------------------

> ## @Configuration 과 proxyBeanMethods

### 학습 테스트
- 다른 사람이 만든 프레임워크, 라이브러리를 테스트하기 위해 만드는 테스트


### @Configuration
- 스프링은 빈을 등록할 때 따로 설정하지 않으면 싱글톤으로 등록한다
- 빈을 싱글톤으로 등록하는 방식은 Proxy를 만들어서 기능을 확장하는 것이다


### @Configuration(proxyBeanMethods = false)
- 프록시를 만들지 않도록 함 (스프링 5.2에서 추가됨)
- 의존성이 없다면 proxy를 생성하는 옵션을 끄는 것이 좋을 수 있다

























