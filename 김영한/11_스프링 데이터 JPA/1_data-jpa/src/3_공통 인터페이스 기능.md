
# 공통 인터페이스 기능 

-------------------------------------------------------------------------------------------------------------------------------------

> ## 순수 JPA 기반 리포지토리 만들기

### 수정
- 리포지토리에 메서드를 만들어서 수행하지 않고, 변경 감지를 통해 변경한다

-------------------------------------------------------------------------------------------------------------------------------------

> ## 공통 인터페이스 설정

### JpaRepository 구현 클래스
- 구현 클래스는 proxy로 자동으로 생성해준다
- 프록시로 생성된 구현 클래스는 @Repository로 컴포넌트 스캔 대상이 된다
- org.springframework.data.repository.Repository를 구현한 클래스는 스캔 대상이 된다


### @Repository 역할
1. ComponentScan 대상으로 Bean으로 등록
2. 여러 DB 예외들을 Spring DB 공통 예외로 변경

-------------------------------------------------------------------------------------------------------------------------------------

> ## 공통 인터페이스 적용

### 예시 코드
    public interface MemberRepositroy extends JpaRepository<Member, Long> {
    }

-------------------------------------------------------------------------------------------------------------------------------------

> ## 공통 인터페이스 분석

### JpaRepository<T, ID>
- spring-data
  - 공통 인터페이스
- spring-data-jpa
  - jpa에서만 사용하는 인터페이스 


### 주요 메서드
- save(S) 
  - 새로운 엔티티는 젖아하고 이미 있는 엔티티는 병합(merge)한다 
- delete(T)
  - 엔티티 하나를 삭제한다
  - 내부에서 em.remove() 호출
- findById(id)
  - 엔티티 하나를 조회한다
  - 내부에서 em.find() 호출
- getOne(id)
  - 엔티티를 프록시로 조회한다
  - 내부에서 em.getReference() 호출
- findAll(...)
  - 모든 엔티티를 조회한다
  - 정렬(sort), 페이징(pageable) 조건을 파라미터로 제공할 수 있다























