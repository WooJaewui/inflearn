
# 실무 활용 - 순수 JPA와 Querydsl

-----------------------------------------------------------------------------------------------------------------------------------

> ## 순수 JPA 리포지토리와 Querydsl

### 동시성 문제
- JPAQueryFactory()에 동시성 문제는 EntityManager에 의존한다
- Entitymanager는 Transaction 단위로 따로 동작한다

-----------------------------------------------------------------------------------------------------------------------------------

> ## 동적 쿼리와 성능 최적화 조회 - Builder 사용

### 참고
- 엔티티, @QueryProjection DTO를 생성하면 compileQuerydsl을 해서 Q인스턴스를 생성해줘야 한다

-----------------------------------------------------------------------------------------------------------------------------------

> ## 동작 쿼리와 성능 최적화 조회 - Where절 파라미터 사용

### BooleanExpression 반환 타입 메서드 장점
- Dto -> 엔티티로 변경해도 where절 코드를 변경하지 않아도 된다
- 여러 개의 BooleanExpression 반환 메서드를 필요에 따라 합칠 수 있다


### BooleanBuilder vs BooleanExpression
- BooleanBuilder
  - 표현식을 모아서 사용할 수 있도록 도와주는 도구
- BooleanExpression
  - 표현식의 결과로 반환되는 값
  - member.age.eq(xx)

-----------------------------------------------------------------------------------------------------------------------------------

> ## 조회 API 컨트롤러 개발

### Profile 설정
    // application.yml
    spring:
      profiles:
        active: local

    // Profile 사용하기
    @Profile("local")


### InnerClass 만드는 이유
- @PostConstructor, @Transactional을 같이 사용할 수 없다






