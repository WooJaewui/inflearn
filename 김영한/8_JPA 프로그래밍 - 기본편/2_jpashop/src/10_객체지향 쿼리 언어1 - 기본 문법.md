
# 객체지향 쿼리 언어 1 - 기본 문법

-----------------------------------------------------------------------------------------------------------------------------------

> ## 소개

### JPA는 다양한 쿼리 방법을 지원
- JPQL
- JPA Criteria
- QueryDSL
- 네이티브 SQL
- JDBC API 직접 사용, MyBatis, SpringJdbcTemplate 함께 사용


### JPQL 소개
- JPQL 엔티티 객체를 대상으로 쿼리를 수행한다 (객체지향 SQL)
- 단점
    - 동적 쿼리를 만들기 어렵다


### JPA Criteria
    CriteriaBuilder cb = em.getCriteriaBuilder();
    CriteriaQuery<Member> query =  cb.createQuery(Member.class);

    Root<Member> m = query.from(Member.class);
    CriteriaQuery<Member> cq = query.select(m);
    ...
- 자바 코드를 통해 쿼리를 짤 수 있다
- JPQL 빌더 역할
- 단점
  - 너무 복잡하고 실용성이 없다
- 실무에서는 거의 사용하지 않는다 (QueryDSL 사용 권장)


### QueryDSL
- 자바 코드로 JPQL을 작성할 수 있다
- 단순하고 쉬움 (실무 사용 권장)


### 네이티브 SQL
- JPA가 제공하는 SQL을 직접 사용하는 기능


### JDBC 직접 사용
- JDBC 커넥션을 직접 사용하거나, 스프링 JdbcTemplate, MyBatis 등을 함께 사용 가능
- 영속성 컨텍스트를 적절한 시점에 강제로 플러시 필요
- JPA를 우회해서 SQL을 실행하기 직전에 영속성 컨텍스트 수동 플러시 필요


### 주의
- JPQL 같은 JPA 기술로 쿼리를 수행하면 commit()하지 않아도 자동으로 persist()를 수행한 후 select를 수행한다 
- JDBC 직접 사용하는 경우, persist()를 수동 플러시한 후 조회해야 제대로 된 결과를 얻을 수 있다

-----------------------------------------------------------------------------------------------------------------------------------

> ## 기본 문법과 쿼리 API

### JPQL Java Persistence Query Language
- JPQL 객체지향 쿼리 언어지만 결국 SQL로 변환된다














