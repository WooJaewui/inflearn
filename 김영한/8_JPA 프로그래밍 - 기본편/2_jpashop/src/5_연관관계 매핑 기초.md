
# 연관관계 매핑 기초

----------------------------------------------------------------------------------------------------------------------------------

> ## 단방향 연관관계

### 목표
- 객체와 테이블 연관관계의 차이를 이해
- 객체의 참조와 테이블의 외래 키를 매핑
- 용어 이해
  - 방향 Direction : 단방향, 양방향
  - 다중성 Multiplicity : 다대일(N:1), 일대다(1:N), 일대일(1:1), 다대다(N:M) 이해
  - 연관관계의 주인 Owner : 객체 양방향 연관관계는 관리 주인이 필요


### 단방향 매핑
    @ManyToOne
    @JoinColumn(name = "TEAM_ID")
    private Team team;
- N:1 관계를 매핑함

----------------------------------------------------------------------------------------------------------------------------------

> ## 양방향 연관관계와 연관관계의 주인 1 - 기본

### 연관관계의 주인과 mappedBy
    @OneToMany(mappedBy = "team")
- 객체와 테이블의 관계 맺는 차이를 이해해야 함


### 객체와 테이블이 관계를 맺는 차이
- 객체 연관관계 2개
  - 팀 -> 멤버 (단방향)
  - 멤버 -> 팀 (단방향)
  - 객체의 양방향 관계는 사실 양방향 관계가 아니라 서로 다른 단방향 관계 2개다
- DB 연관관계 1개
  - 팀 <-> 멤버 (양방향)
  - 외래키 하나로 양방향 연관관계를 가짐


### 연관관계의 주인 Owner
- 양방향 매핑 규칭
  - 객체의 두 관계 중 하나를 연관관계의 주인으로 지정
  - 연관관계의 주인만이 외래 키를 관리 (등록, 수정)
  - 주인이 아닌 쪽은 읽기만 가능
  - 주인은 mappedBy 속성 사용 X
  - 주인이 아니면 mappedBy 속성으로 주인 지정


### 누구를 주인으로
- 외래 키가 있는 곳을 주인으로 정하라 (DB 기준으로 1:N 에서 N 테이블)

----------------------------------------------------------------------------------------------------------------------------------

> ## 양방향 연관관계와 연관관계의 주인 2 - 주의점, 정리

### 양방향 매핑시 가장 많이 하는 실수
- 연관관계의 주인에 값을 입력하지 않음
- 양방향 매핑시 연관관계의 주인에 값을 입력해야 한다 (순수한 객체 관계를 고려하면 항상 양쪽 다 값을 입력해야 한다)
- 연관관계 편의 메서드를 생성하자
- 양방향 매핑시에 무한 루프를 조심하자

----------------------------------------------------------------------------------------------------------------------------------

> ## 실전 예제 2 - 연관관계 매핑 시작


































