
# 프로젝트 환경 설정 

----------------------------------------------------------------------------------------------------------------------------------

> ## 프로젝트 생성

### 라이브러리
- WEB
- Spring Data JPA
- H2
- Lombok
- Thymeleaf

----------------------------------------------------------------------------------------------------------------------------------

> ## 라이브러리 살펴보기

### gradle 의존관계 확인
    // cmd 창
    ./gradlew dependencies


### 핵심 라이브러리
- 스프링 MVC
- 스프링 ORM
- JPA, 하이버네이트
- 스프링 데이터 JPA


### 기타 라이브러리
- H2 DB 클라이언트
- 커넥션 풀 : 히카리 CP
- WEB thymeleaf
- 로킹 Slf4j & LogBack
- 테스트

----------------------------------------------------------------------------------------------------------------------------------

> ## View 환경 설정

### Thymeleaf
- Natural Template
- 태그를 모두 닫아줘야 한다


### 자동 리로드
    implementation 'org.springframework.boot:spring-boot-devtools'
- 개발에 도움을 주는 여러가지 라이브러리가 들어있다

----------------------------------------------------------------------------------------------------------------------------------

> ## H2 데이터베이스 설치

### H2 DB 파일 생성
    jdbc:h2:~/jpashop
- 파일 생성 후 윈도우는 사용자 디렉토리 안에 파일 생성 확인
- 파일 생성 이후부터는 jdbc:h2:tcp://localhost/~/jpashop 으로 접속 (네트워크 모드 접속)

----------------------------------------------------------------------------------------------------------------------------------

> ## JPA와 DB 설정, 동작확인

### 자주 사용하는 코드 템플릿 만들기
    Settings -> Live Template 
- custom 그룹 생성, 템플릿 생성하기


### @Transactional
- test 메서드에 붙어 있으면 테스트 수행이 끝난 후에 데이터를 롤백한다


### cmd build
    ./gradlew clean build


### jar 파일 실행하기
    java -jar 파일이름.jar
- 빌드된 jar 파일이 실행된다


### persistence.xml
- 스프링 부트를 통해 자동화 되어 있다 (application.yml 파일에 설정)
- LocalContainerEntityManagerFactoryBean도 없다 


### 쿼리 파라미터 타입 남기기
    logging:
        level:
            org.hibernate.SQL : debug 
            org.hibernate.type : trace


### 쿼리 파라미터 로그 남기기
    implementation "com.github.gavlyukovskiy:p6spy-spring-boot-starter:1.5.6"
- spring-boot-datasource-decorator 외부 라이브러리 사용 (P6Spy)


### 주의 사항
- 외부 라이브러리는 시스템 자원을 사용하므로, 개발에서만 사용하고 운영 서버에서는 사용하지 않는 것을 권장한다 
- 꼭 필요한 경우 테스트 후 사용















